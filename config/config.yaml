# ═══════════════════════════════════════════════════════════════
#                    TrendRadar 配置文件
# ═══════════════════════════════════════════════════════════════


# ===============================================================
# 1. 基础设置
# ===============================================================
app:
  timezone: "Asia/Shanghai"
  show_version_update: true           # 保留你原有配置


# ===============================================================
# 2. 数据源 - 热榜平台（完全保留你的原有配置，无修改）
# ===============================================================
platforms:
  - id: "toutiao"
    name: "今日头条"
  - id: "baidu"
    name: "百度热搜"
  - id: "wallstreetcn-hot"
    name: "华尔街见闻"
  - id: "thepaper"
    name: "澎湃新闻"
  - id: "bilibili-hot-search"
    name: "bilibili 热搜"
  - id: "cls-hot"
    name: "财联社热门"
  - id: "ifeng"
    name: "凤凰网"
  - id: "tieba"
    name: "贴吧"
  - id: "weibo"
    name: "微博"
  - id: "douyin"
    name: "抖音"
  - id: "zhihu"
    name: "知乎"


# ===============================================================
# 3. 数据源 - RSS 订阅（完全保留你的原有配置，无修改）
# ===============================================================
rss:
  enabled: true
  freshness_filter:
    enabled: true
    max_age_days: 3
  feeds:
    - id: "hacker-news"
      name: "Hacker News"
      url: "https://hnrss.org/frontpage"
    - id: "ruanyifeng"
      name: "阮一峰的网络日志"
      url: "http://www.ruanyifeng.com/blog/atom.xml"


# ===============================================================
# 4. 报告模式（完全保留你的原有配置，无修改）
# ===============================================================
report:
  mode: "current"
  rank_threshold: 10
  sort_by_position_first: false
  max_news_per_keyword: 0
  reverse_content_order: false


# ===============================================================
# 5. 推送通知（核心修改：匹配你的密钥名称，无明文）
# ===============================================================
notification:
  enabled: true
  push_window:
    enabled: false
    start: "20:00"
    end: "22:00"
    once_per_day: true
  channels:
    feishu:
      webhook_url: ""
    dingtalk:
      webhook_url: ""
    wework:
      webhook_url: ""
      msg_type: "markdown"
    telegram:
      bot_token: ""
      chat_id: ""
    # 核心修改：完全匹配你已有的 MAIL_* 密钥名称
    email:
      enable: true  # 关键：启用邮件通知（必须添加）
      from: "${{MAIL_FROM"           # 发件人邮箱（匹配你的 secret: MAIL_FROM）
      password: "${MAIL_PASSWORD}"    # 发件人邮箱授权码（匹配你的 secret: MAIL_PASSWORD）
      to: "${MAIL_TO}"               # 收件人邮箱（英文键名，匹配你的 secret: MAIL_TO）
      smtp_server: "smtp.163.com"  # SMTP服务器（匹配你的环境变量，或直接填固定值如 smtp.163.com）
      smtp_port: "465"      # SMTP端口（匹配你的环境变量，或直接填 587）
      subject: "TrendRadar 数据抓取报告"    # 可选：自定义邮件主题
      send_html: true                      # 可选：发送HTML格式报告（推荐开启）
      timeout: 30  # 连接超时时间，避免因超时断开
    ntfy:
      server_url: "https://ntfy.sh"
      topic: ""
      token: ""
    bark:
      url: ""
    slack:
      webhook_url: ""

# ===============================================================
# 6. 存储配置（关键：启用HTML，保障邮件推送有内容）
# ===============================================================
storage:
  backend: "auto"
  formats:
    sqlite: true
    txt: false
    html: true                        # 已改为true，邮件推送必备（你的原配置是false，已优化）
  local:
    data_dir: "output"
    retention_days: 0
  remote:
    retention_days: 0
    endpoint_url: ""
    bucket_name: ""
    access_key_id: ""
    secret_access_key: ""
  pull:
    enabled: false
    days: 7


# ===============================================================
# 7. 高级设置（完全保留你的原有配置，无修改）
# ===============================================================
advanced:
  version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version"
  crawler:
    enabled: true
    request_interval: 1000
    use_proxy: false
    default_proxy: "http://127.0.0.1:10801"
  rss:
    request_interval: 2000
    timeout: 15
    use_proxy: false
    proxy_url: ""
    notification_enabled: true
  weight:
    rank: 0.6
    frequency: 0.3
    hotness: 0.1
  max_accounts_per_channel: 3
  batch_size:
    default: 4000
    dingtalk: 20000
    feishu: 30000
    bark: 4000
    slack: 4000
  batch_send_interval: 3
  feishu_message_separator: "━━━━━━━━━━━━━━━━━━━"
